# Extending the Framework

## Adding a New Sink

To send data to a new provider (e.g., Mixpanel), implement `AnalyticsSink`. Make sure to add
`@Inject` and `@ContributesBinding(AppScope::class, multibinding = true)` to get it injected into the pipeline.

```kotlin
@Inject
@ContributesBinding(AppScope::class, multibinding = true)
class MixpanelSink(private val mixpanel: MixpanelAPI) : AnalyticsSink {
    override fun track(event: AnalyticsEvent, contextProperties: Map<ContextAnalyticsProperty, String>) {
        val props = JSONObject()
        // Add event properties
        event.eventProperties.forEach { (k, v) -> props.put(k.name, v) }
        // Add context properties
        contextProperties.forEach { (k, v) -> props.put(k.name, v) }

        mixpanel.track(event.name, props)
    }
}
```

## Defining New Properties

Define strongly-typed keys for your properties to maintain consistency.

```kotlin
// In AnalyticsProperty.kt or a feature-specific extensions file
data object UserTier : ContextAnalyticsProperty(
    name = "user_tier",
    scope = AnalyticsPropertyScope.USER
)
```
